<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI Image Generator - Create stunning images with artificial intelligence">
    <meta name="theme-color" content="#1a1a1a">
    <meta name="mobile-web-app-capable" content="yes">
    <title>AI Image Generator</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="/public/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AI Image Gen">
    <link rel="apple-touch-icon" href="/public/icon-192.svg">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/gallery.css">

    <!-- Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âœ¨</text></svg>">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1 class="header__title">âœ¨ AI Image Generator</h1>
            <p class="header__subtitle">Transform your imagination into stunning visuals</p>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Empty State -->
            <div id="empty-state" class="empty-state">
                <div class="empty-state__icon">ðŸŽ¨</div>
                <h2 class="empty-state__title">No images yet</h2>
                <p class="empty-state__description">
                    Start creating by typing a description of the image you want to generate in the input below.
                </p>
            </div>

            <!-- Gallery Grid -->
            <div id="gallery" class="gallery"></div>
        </main>

        <!-- Floating Input Bar -->
        <div class="input-bar">
            <div class="input-bar__container">
                <div class="input-bar__input-row">
                    <button id="surprise-btn" class="input-bar__icon-btn input-bar__surprise-btn"
                        title="Surprise me with a random prompt">
                        ðŸŽ²
                    </button>
                    <textarea id="prompt-input" class="input-bar__input" placeholder="Describe an image to generate..."
                        rows="1"></textarea>
                </div>
                <div class="input-bar__actions">
                    <div class="input-bar__actions-left">
                        <button id="settings-btn" class="input-bar__icon-btn" title="Generation settings">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect width="18" height="18" x="3" y="3" rx="2" />
                                <path d="M3 9h18" />
                                <path d="M9 21V9" />
                            </svg>
                        </button>
                        <button id="enhance-btn" class="input-bar__icon-btn" title="Enhance prompt with AI">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path
                                    d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z" />
                            </svg>
                        </button>
                    </div>
                    <div class="input-bar__actions-right">
                        <button id="generate-btn" class="input-bar__button" title="Generate image">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m22 2-7 20-4-9-9-4 20-7Z" />
                                <path d="M22 2 11 13" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Panel -->
        <div id="settings-panel" class="settings-panel">
            <div class="settings-panel__header">
                <h3 class="settings-panel__title">Generation Settings</h3>
                <button id="settings-close" class="settings-panel__close">âœ•</button>
            </div>
            <div class="settings-panel__content">
                <!-- Model Selection -->
                <div class="settings-group">
                    <label class="settings-label">Model</label>
                    <select id="setting-model" class="settings-select">
                        <option value="z-image-turbo" selected>Z-Image Turbo (Fast)</option>
                        <option value="flux-dev">FLUX.1 [dev] (12B)</option>
                        <option value="flux-kontext-lora-t2i">FLUX Kontext LoRA (T2I)</option>
                        <option value="hidream-i1-fast">HiDream I1 Fast (17B)</option>
                        <option value="hunyuan-image">Hunyuan Image 3.0</option>
                        <option value="qwen-image">Qwen Image (Text Rendering)</option>
                        <option value="flux-kontext">FLUX Kontext (Image Editing)</option>
                    </select>
                </div>

                <!-- Image Size -->
                <div class="settings-group" id="image-size-group">
                    <label class="settings-label">Image Size</label>
                    <select id="setting-image-size" class="settings-select">
                        <option value="square_hd" selected>Square HD</option>
                        <option value="square">Square</option>
                        <option value="portrait_4_3">Portrait 4:3</option>
                        <option value="portrait_16_9">Portrait 16:9</option>
                        <option value="landscape_4_3">Landscape 4:3</option>
                        <option value="landscape_16_9">Landscape 16:9</option>
                        <option value="custom">Custom Size</option>
                    </select>
                </div>

                <!-- Aspect Ratio (FLUX Kontext only) -->
                <div class="settings-group settings-group--hidden" id="aspect-ratio-group">
                    <label class="settings-label">Aspect Ratio</label>
                    <select id="setting-aspect-ratio" class="settings-select">
                        <option value="1:1" selected>1:1 (Square)</option>
                        <option value="4:3">4:3 (Landscape)</option>
                        <option value="3:4">3:4 (Portrait)</option>
                        <option value="16:9">16:9 (Widescreen)</option>
                        <option value="9:16">9:16 (Vertical)</option>
                        <option value="3:2">3:2</option>
                        <option value="2:3">2:3</option>
                        <option value="21:9">21:9 (Ultrawide)</option>
                        <option value="9:21">9:21</option>
                    </select>
                </div>

                <!-- Custom Size (hidden by default) -->
                <div id="custom-size-group" class="settings-group settings-group--hidden">
                    <div class="settings-row">
                        <div class="settings-field">
                            <label class="settings-label">Width</label>
                            <input type="number" id="setting-width" class="settings-input" value="1024" min="256"
                                max="2048" step="64">
                        </div>
                        <div class="settings-field">
                            <label class="settings-label">Height</label>
                            <input type="number" id="setting-height" class="settings-input" value="768" min="256"
                                max="2048" step="64">
                        </div>
                    </div>
                </div>

                <!-- Inference Steps -->
                <div class="settings-group" id="steps-group">
                    <label class="settings-label">Inference Steps: <span id="steps-value">30</span></label>
                    <input type="range" id="setting-steps" class="settings-range" value="30" min="1" max="30" step="1">
                </div>

                <!-- Guidance Scale (Qwen only) -->
                <div class="settings-group settings-group--hidden" id="guidance-group">
                    <label class="settings-label">Guidance Scale: <span id="guidance-value">2.5</span></label>
                    <input type="range" id="setting-guidance" class="settings-range" value="2.5" min="1" max="10"
                        step="0.1">
                </div>

                <!-- Negative Prompt (Qwen only) -->
                <div class="settings-group settings-group--hidden" id="negative-prompt-group">
                    <label class="settings-label">Negative Prompt</label>
                    <textarea id="setting-negative-prompt" class="settings-textarea"
                        placeholder="blurry, ugly, low quality" rows="2"></textarea>
                </div>

                <!-- Turbo Mode (Qwen only) -->
                <div class="settings-group settings-group--hidden" id="turbo-group">
                    <label class="settings-checkbox">
                        <input type="checkbox" id="setting-turbo">
                        <span>Turbo Mode (10 steps, faster)</span>
                    </label>
                </div>

                <!-- Enhance Prompt (FLUX Kontext only) -->
                <div class="settings-group settings-group--hidden" id="enhance-prompt-group">
                    <label class="settings-checkbox">
                        <input type="checkbox" id="setting-enhance-prompt">
                        <span>Enhance Prompt</span>
                    </label>
                </div>

                <!-- Input Image for Editing (Qwen only) -->
                <div class="settings-group settings-group--hidden" id="input-image-group">
                    <label class="settings-label">Input Image (for editing)</label>
                    <div class="image-upload">
                        <input type="file" id="setting-input-image" class="image-upload__input" accept="image/*">
                        <label for="setting-input-image" class="image-upload__label" id="image-upload-label">
                            <span class="image-upload__icon">ðŸ“·</span>
                            <span class="image-upload__text">Choose image or drag here</span>
                        </label>
                        <div id="image-preview" class="image-upload__preview image-upload__preview--hidden">
                            <img id="image-preview-img" src="" alt="Preview">
                            <button type="button" id="image-preview-clear" class="image-upload__clear">âœ•</button>
                        </div>
                    </div>
                    <p class="settings-hint" id="input-image-hint">Optional: Upload an image to edit with your prompt
                    </p>
                </div>

                <!-- Number of Images -->
                <div class="settings-group">
                    <label class="settings-label">Number of Images</label>
                    <select id="setting-num-images" class="settings-select">
                        <option value="1">1</option>
                        <option value="2" selected>2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                </div>

                <!-- Output Format -->
                <div class="settings-group">
                    <label class="settings-label">Output Format</label>
                    <select id="setting-format" class="settings-select">
                        <option value="png" selected>PNG</option>
                        <option value="jpeg">JPEG</option>
                        <option value="webp">WebP</option>
                    </select>
                </div>

                <!-- Acceleration (Z-Image only) -->
                <div class="settings-group" id="acceleration-group">
                    <label class="settings-label">Acceleration</label>
                    <select id="setting-acceleration" class="settings-select">
                        <option value="none" selected>None (Best Quality)</option>
                        <option value="regular">Regular</option>
                        <option value="high">High (Fastest)</option>
                    </select>
                </div>

                <!-- Seed -->
                <div class="settings-group">
                    <label class="settings-label">Seed (optional)</label>
                    <input type="number" id="setting-seed" class="settings-input" placeholder="Random" min="0">
                </div>

                <!-- Safety Checker -->
                <div class="settings-group">
                    <label class="settings-checkbox">
                        <input type="checkbox" id="setting-safety">
                        <span>Enable Safety Checker</span>
                    </label>
                </div>

                <!-- Sync Mode -->
                <div class="settings-group">
                    <label class="settings-checkbox">
                        <input type="checkbox" id="setting-sync">
                        <span>Sync Mode (faster, no history)</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Lightbox Modal -->
        <div id="lightbox-modal" class="modal">
            <button class="modal__close" title="Close">âœ•</button>
            <div class="modal__content">
                <img class="modal__image" src="" alt="">
                <div class="modal__info">
                    <div class="modal__prompt-container">
                        <p class="modal__prompt"></p>
                        <button class="modal__copy-btn" title="Copy prompt">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                width="14" height="14">
                                <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
                                <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
                            </svg>
                        </button>
                    </div>
                    <div class="modal__actions">
                        <button class="modal__button modal__download-btn modal__button--primary">
                            â¬‡ Download
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts (ES Modules) -->
    <script type="module" src="js/app.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/public/sw.js')
                    .then((registration) => {
                        console.log('SW registered:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('SW registration failed:', error);
                    });
            });
        }
    </script>
</body>

</html>